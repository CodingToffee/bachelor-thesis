Node-RED is used as a service for retrieving the data that is published by the PLC's OPC UA server. It further enables the preprocessing and injection into the database. To retrieve the data from the OPC UA server, an OPC UA library called node-red-contrib-opcua is being used. The node with the name timestamp at the beginning of the flow is simply being used to activate the flow. It can be set to various intervals or fixed times. It was decided to set it to an interval of 0.2 seconds. This interval was selected due to the fact that some operations on the sewing machine have an execution time of about 1 second when unexperienced workers operate it. Due to the lack of experienced workers it was estimated that an experienced worker coud be four times as fast. To be sure to capture every event, the interval was set to 0.2 seconds which equals a workers execution time who is five times as fast. The interval could later still be adjusted according to test results. The four subsequent nodes called OPC UA Items each hold the namespace and ID of the different signals. These are fed into the simulator node. This node is configured with the endpoint which consists of the IP adress of the PLC, the port and the name of the OPC UA server if existent. This node outputs the value for each of the OPC UA items in a serial manner. 
The succeding node is a function node, which holds javascript code to execute the first preprocessing step which is concatenating the four values into one string. The most import reason for concatenating the values is that in influxdb, every value has its own table. If a query would be performed over multiple values, the tables would be needed to be joined which is very compute intense. This can lead to noticeable delays in the final dashboard. By concatenating the values, there is no need for joining the tables anymore because all values are then stored in one table.